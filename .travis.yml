env:
  global:
    # GITHUB_TOKEN
    - secure: "aONDODl2bMWGOzcgPxi597RX+vqTQDtK+cIXi+ozuas2uPRZ/S19VEebz/gQUL1sKlcKjwsZTB1kfhm0VMzbvTxPVJErxSckzM6tpKKg84YJK8NryhPHnC7aXvEPq2OhPh0dpSskxQfE7+D0PAQpGqq1WUPN07BAtYR8jvrhubpAbvRmtU6iz1/2nGy9HmRHPJn4NxdcF+Mm1C6geS9QUhpzBah5A7tUBhs7/8wzp08WpH+KBuznsi7SU2w1jX32usHcLqTCTv2g57xEnz8aLisz5tz89XtOHyssjMv+3vTJWpm8KpVrlJGRjwOCIw4hkIusduLhvXcZ41S4L/ATRhSrv/i5Y57K3pdJ4Rz/irk2i8nC6VYpAs8rDo6Sg1BipvpQNJ0D6Oiqazo+UHV+Yx1HlnsGRnuAGFdvMBMNUyiNkG1ryWCyvf1n8P7JPTyQ7BfW+ks85OMupv9NGjCpL8Ka/YyrQK+byJ6xOw8iSdlDx1I3yCBsVZgJVvj/EX5uoJ7uNITT19exvDjtG5aXZuqute4ekIrKFCUk6AoA+iyh0c0f6fGitP2Y89aiugrnG7xzmYeGpI5mHIFbrVB8jRCNxlbtKHYr1rqxM+zwWW5e11LZ+Lp04oOQNL/DXtz+aRdEgWNc5ghYviadbwhY7mTCk7whsqW6i8StjYs15L4="

language: node_js
node_js:
  - '10'

install:
  - npm install

script:
  - npm run lint
  - TARGET="$(gh-pages-multi better-target $TRAVIS_BRANCH)"
  - PUBLIC_URL=https://koumoul-dev.github.io/data-fair-charts/$TARGET npm run generate

after_success:
  # Do not deploy code from pull requests
  - if [ "$TRAVIS_PULL_REQUEST" == "true" ]; then exit; fi
  # Deploy by pushing to a subdirectory in gh-pages branch based on current branch/tag
  - ./node_modules/.bin/gh-pages-multi deploy -v -s dist -t $TRAVIS_BRANCH --no-history --better-target --remote https://$GITHUB_TOKEN@github.com/koumoul-dev/data-fair-charts.git
